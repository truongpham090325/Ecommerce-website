extends ../layouts/default.pug
include ../mixins/pagination.pug
include ../mixins/form-search.pug

block main
  .row
    .col-12
      .card
        .card-header
          .row.align-items-center
            .col
              h4.card-title #{pageTitle}
            // end col
            .col-auto
              a.btn.btn-info.me-1(href=`/${pathAdmin}/product/export/csv`)
                i.fa-solid.fa-download.me-1
                | Xuất Excel
              a.btn.btn-danger.me-1(
                  href=`/${pathAdmin}/product/trash`
                  )
                  i.fa-solid.fa-trash.me-1
                  | Thùng rác
              a.btn.btn-primary.my-1(
                href=`/${pathAdmin}/product/create`
                )
                i.fa-solid.fa-plus.me-1
                | Tạo sản phẩm
                // end col
            // end col
          // end row
        // end card-header
        .card-body.pt-0
          .row
            .col-lg-6
              +form-search()
          .table-responsive
            table.table.table-striped.mb-0
              thead.table-light
                tr
                  th STT
                  th Avatar
                  th Tên sản phẩm
                  th Giá cũ (đ)
                  th Giá mới (đ)
                  th Còn lại
                  th Số biến thể
                  th Vị trí
                  th Trạng thái
                  th Lượt xem
                  th.text-end Hành động
              tbody
                each item, index in recordList
                  tr
                    td #{pagination.skip + index + 1}
                    td
                      if(item.images && item.images.length > 0)
                        img(
                          src=`${domainCDN}${item.images[0]}`
                          class="rounded thumb-md me-1 d-inline"
                        )
                    td #{item.name}
                    td
                      if(item.priceOld)
                        | #{item.priceOld.toLocaleString("vi-VN")}
                    td
                      if(item.priceNew)
                        | #{item.priceNew.toLocaleString("vi-VN")}
                    td #{item.stock}
                    td #{item.variants.length}
                    td #{item.position}
                    td
                      if (item.status == "draft")
                        span(class="badge bg-dark") Bản nháp
                      else if (item.status == "active")
                        span(class="badge bg-success") Hoạt động
                      else if (item.status == "inactive")
                        span(class="badge bg-danger") Tạm dừng
                    td #{item.view}
                    td.text-end
                      a(href=`/${pathAdmin}/product/edit/${item.id}`)
                        i.las.la-pen.text-secondary.fs-20
                      a(
                        href="javascript:;"
                        button-api
                        data-method="PATCH"
                        data-api=`/${pathAdmin}/product/delete/${item.id}`
                      )
                        i.las.la-trash-alt.text-secondary.fs-20
          +pagination()
    // end col
